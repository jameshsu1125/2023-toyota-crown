(self.webpackChunk_=self.webpackChunk_||[]).push([[205],{205:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return W}});var r=n(572),i=n(152),o=n(294),l=n.p+"bundle/video/pages/test/video/1080p.mp4",a=n.p+"bundle/video/pages/test/video/360p.mp4",d=n.p+"bundle/video/pages/test/video/480p.mp4",s=n.p+"bundle/video/pages/test/video/720p.mp4",u=n.p+"bundle/video/pages/test/video/original.mp4",c=n.p+"bundle/video/pages/test/video/1080p.webm",p=n.p+"bundle/video/pages/test/video/720p.webm",f=(0,o.createContext)(),h={original:{url:u,size:"original",type:"video/mp4",encoder:"H.264"},fullHD:{url:l,size:"full HD",type:"video/mp4",encoder:"ffmpeg-H.264"},HD:{url:s,size:"HD",type:"video/mp4",encoder:"ffmpeg-H.264"},SD:{url:d,size:"SD",type:"video/mp4",encoder:"ffmpeg-H.264"},SSD:{url:a,size:"SSD",type:"video/mp4",encoder:"ffmpeg-H.264"},fullHD_Webm:{url:c,size:"full HD",type:"video/webm",encoder:"ffmpeg-H.264"},HD_Webm:{url:p,size:"HD",type:"video/webm",encoder:"ffmpeg-H.264"}},v={video:h.HD_Webm},g=n(979),m=n(379),w=n.n(m),b=n(795),y=n.n(b),j=n(569),O=n.n(j),x=n(565),P=n.n(x),S=n(216),D=n.n(S),z=n(589),H=n.n(z),E=n(241),T=n.n(E),k={};k.styleTagTransform=H(),k.setAttributes=P(),k.insert=O().bind(null,"head"),k.domAPI=y(),k.insertStyleElement=D(),w()(T(),k),T()&&T().locals&&T().locals;var V=n(893);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N={scrollTop:0,total:0,loaded:!1,percent:0,width:1280,height:678,index:0},Z=(0,o.forwardRef)((function(e,t){var n=(0,o.useRef)(),r=(0,o.useContext)(f),l=(0,i.Z)(r,1)[0],a=(0,o.useState)(l.video),d=(0,i.Z)(a,2),s=d[0],u=d[1],c=(0,o.useState)(!0),p=(0,i.Z)(c,2),h=p[0],v=p[1],m=(0,o.useState)(N),w=(0,i.Z)(m,2),b=w[0],y=w[1],j=(0,o.useState)({width:1280,height:678,left:0,top:0}),O=(0,i.Z)(j,2),x=O[0],P=O[1];return(0,o.useEffect)((function(){u(l.video),y(N),setTimeout((function(){v(!0)}),100)}),[l.video]),(0,o.useEffect)((function(){var e=function(){var e=(0,g.CoverSize)({width:b.width,height:b.height},{width:window.innerWidth,height:window.innerHeight});P(e)};return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),(0,o.useLayoutEffect)((function(){n.current&&b.index%3==0&&(n.current.currentTime=Number(b.scrollTop.toFixed(2)))}),[b.index,b.scrollTop]),(0,o.useImperativeHandle)(t,(function(){return{unmount:function(){v(!1)}}})),(0,V.jsxs)(V.Fragment,{children:[h&&(0,V.jsxs)("video",{preload:"auto",onLoadedData:function(e){y((function(t){return _(_({},t),{},{loaded:!0,total:e.target.duration})}))},onWheel:b.loaded?function(e){var t=e.deltaY;y((function(e){var n=e.scrollTop+.001*t,r=n<0?0:n;n>e.total&&(r=e.total);var i=r/e.total*100,o=e.index+1;return _(_({},e),{},{scrollTop:r,percent:i,index:o})}))}:function(){},ref:n,style:{width:x.width,height:x.height},className:"max-h-none max-w-none",children:[(0,V.jsx)("source",{type:s.type,src:s.url}),(0,V.jsx)("track",{default:!0,kind:"captions"})]}),(0,V.jsx)("div",{className:"videoMask pointer-events-none absolute top-0 h-full w-full"}),(0,V.jsxs)("div",{className:"absolute bottom-0 h-10 w-full",children:[(0,V.jsx)("div",{className:"absolute top-0 h-full w-full bg-black opacity-50"}),(0,V.jsx)("div",{className:"absolute top-0 h-full w-full bg-slate-300",style:{width:"".concat(b.percent,"%")}})]})]})})),L=Z;function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M=(0,o.memo)((function(){var e=(0,o.useRef)(),t=(0,o.useState)(v),n=(0,i.Z)(t,2),r=n[0],l=n[1],a=(0,o.useMemo)((function(){return[r,l]}),[r]);return(0,V.jsx)(f.Provider,{value:a,children:(0,V.jsxs)("div",{className:"flex h-screen w-full items-center justify-center overflow-hidden",children:[(0,V.jsx)(L,{ref:e}),(0,V.jsx)("div",{className:"absolute top-0 right-0",children:(0,V.jsxs)("select",{className:"select-bordered select w-full max-w-xs",defaultValue:v.url,onChange:function(t){e.current.unmount();var n=Object.entries(h).filter((function(e){return e[1].url===t.target.value})).map((function(e){return e[1]}))[0];l((function(e){return U(U({},e),{},{video:n})}))},children:[(0,V.jsx)("option",{disabled:!0,children:"select video quality?"}),Object.entries(h).map((function(e){return(0,V.jsxs)("option",{value:e[1].url,children:[e[1].size,"(".concat(e[1].type,")")]},JSON.stringify(e))}))]})})]})})})),W=M},241:function(e,t,n){var r=n(81),i=n(645),o=n(667),l=n(692),a=i(r),d=o(l);a.push([e.id,".videoMask {\n  background-image: url("+d+");\n}\n",""]),e.exports=a},667:function(e){"use strict";e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},692:function(e,t,n){"use strict";n.r(t),t.default=n.p+"bundle/image/pages/test/video/mask.png"},979:function(e,t,n){var r;r=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValidateURL=t.ValidatePhone=t.ValidateEmail=t.CoverSize=t.Position=t.ScrollTop=t.Dollar=t.Uid=t.Pad=void 0,t.Pad=function(e,t){void 0===t&&(t=4);for(var n="",r=0;r<t;r++)n+="0";return String(n+e).slice(-1*t)},t.Uid=function(e){void 0===e&&(e=10);for(var t="",n=0;n<e;n++)t+=(16*(1+Math.random())|0).toString(16).substring(1);return t},t.Dollar=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},t.ScrollTop=function(){if(window)return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop},t.Position=function(e){if(window){var t=null==e?void 0:e.getBoundingClientRect();return{top:t.top+window.scrollY,left:t.left+window.scrollX}}},t.CoverSize=function(e,t){void 0===e&&(e={width:1280,height:720}),void 0===t&&(t={width:window.innerWidth,height:window.innerHeight});var n=e.width,r=e.height,i=t.width,o=t.height,l=r/n,a={width:0,height:0,left:0,top:0};return o/i>l?(a.width=o/l,a.height=o,a.left=.5*(i-n),a.top=0):(a.width=i,a.height=i*l,a.left=0,a.top=.5*(o-r)),a},t.ValidateEmail=function(e){return String(e).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)},t.ValidatePhone=function(e){return""!==e&&10===e.length&&"09"===e.slice(0,2)},t.ValidateURL=function(e){return!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)};var n={Pad:t.Pad,Uid:t.Uid,Dollar:t.Dollar,ScrollTop:t.ScrollTop,Position:t.Position,CoverSize:t.CoverSize,ValidateEmail:t.ValidateEmail,ValidatePhone:t.ValidatePhone,ValidateURL:t.ValidateURL};t.default=n}.apply(t,[n,t]),void 0===r||(e.exports=r)}}]);