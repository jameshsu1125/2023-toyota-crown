(self.webpackChunk_=self.webpackChunk_||[]).push([[205],{205:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return W}});var o=n(572),r=n(152),i=n(294),l=n.p+"bundle/video/pages/test/video/1080p.mp4",a=n.p+"bundle/video/pages/test/video/360p.mp4",u=n.p+"bundle/video/pages/test/video/480p.mp4",c=n.p+"bundle/video/pages/test/video/720p.mp4",s=n.p+"bundle/video/pages/test/video/original.mp4",d=n.p+"bundle/video/pages/test/video/1080p.webm",p=n.p+"bundle/video/pages/test/video/720p.webm",f=(0,i.createContext)(),h={original:{url:s,size:"original",type:"video/mp4",encoder:"H.264"},fullHD:{url:l,size:"full HD",type:"video/mp4",encoder:"ffmpeg-H.264"},HD:{url:c,size:"HD",type:"video/mp4",encoder:"ffmpeg-H.264"},SD:{url:u,size:"SD",type:"video/mp4",encoder:"ffmpeg-H.264"},SSD:{url:a,size:"SSD",type:"video/mp4",encoder:"ffmpeg-H.264"},fullHD_Webm:{url:d,size:"full HD",type:"video/webm",encoder:"ffmpeg-H.264"},HD_Webm:{url:p,size:"HD",type:"video/webm",encoder:"ffmpeg-H.264"}},v={video:h.HD},m=n(979),g=n(379),w=n.n(g),b=n(795),y=n.n(b),j=n(569),O=n.n(j),S=n(565),P=n.n(S),x=n(216),T=n.n(x),D=n(589),z=n.n(D),H=n(241),E=n.n(H),C={};C.styleTagTransform=z(),C.setAttributes=P(),C.insert=O().bind(null,"head"),C.domAPI=y(),C.insertStyleElement=T(),w()(E(),C),E()&&E().locals&&E().locals;var U=n(893);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Z={scrollTop:0,total:0,loaded:!1,percent:0,width:1280,height:678,isUpdate:!1},N=(0,i.forwardRef)((function(e,t){var n,o=(0,i.useRef)(),l=(0,i.useContext)(f),a=(0,r.Z)(l,1)[0],u=(0,i.useState)(a.video),c=(0,r.Z)(u,2),s=c[0],d=c[1],p=(0,i.useState)(!1),h=(0,r.Z)(p,2),v=h[0],g=h[1],w=(0,i.useState)(Z),b=(0,r.Z)(w,2),y=b[0],j=b[1],O=(0,i.useState)({sy:0,ey:0,isTouch:!1}),S=(0,r.Z)(O,2),P=S[0],x=S[1],T=(0,i.useState)({width:1280,height:678,left:0,top:0}),D=(0,r.Z)(T,2),z=D[0],H=D[1];return(0,i.useEffect)((function(){d(a.video),j(Z),setTimeout((function(){g(!0)}),100)}),[a.video]),(0,i.useEffect)((function(){var e=function(){var e=(0,m.CoverSize)({width:y.width,height:y.height},{width:window.innerWidth,height:window.innerHeight});H(e)};return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),(0,i.useLayoutEffect)((function(){if(o.current&&!y.isUpdate){var e=Number(y.scrollTop.toFixed(2));o.current.currentTime!==e&&(o.current.currentTime=e,j((function(e){return V(V({},e),{},{isUpdate:!0})})))}}),[y.isUpdate,y.scrollTop]),(0,i.useImperativeHandle)(t,(function(){return{unmount:function(){g(!1)}}})),(0,U.jsxs)(U.Fragment,{children:[v&&(0,U.jsxs)("video",{playsInline:!0,muted:!0,preload:"auto",autoPlay:!0,onTimeUpdateCapture:function(){j((function(e){return V(V({},e),{},{isUpdate:!1,currentTimeCapture:!0})}))},onLoadedData:function(e){e.target.pause(),j((function(t){return V(V({},t),{},{loaded:!0,total:e.target.duration})}))},onTouchStart:function(e){var t=(0,r.Z)(e.touches,1)[0].clientY;x({sy:t,ey:t,isTouch:!0})},onTouchMove:function(e){var t=P.isTouch,n=P.sy;if(t){var o=(0,r.Z)(e.touches,1)[0].clientY,i=n-o;j((function(e){var t=e.scrollTop+.001*i,n=t<0?0:t;t>e.total&&(n=e.total);var o=n/e.total*100;return V(V({},e),{},{scrollTop:n,percent:o})})),P((function(e){return V(V({},e),{},{sy:o})}))}},onTouchEnd:function(){x((function(e){return V(V({},e),{},{isTouch:!1})}))},onWheel:y.loaded?function(e){var t=e.deltaY;j((function(e){var n=e.scrollTop+.001*t,o=n<0?0:n;n>e.total&&(o=e.total);var r=o/e.total*100;return V(V({},e),{},{scrollTop:o,percent:r})}))}:function(){},ref:o,style:{width:z.width,height:z.height},className:"max-h-none max-w-none",children:[(0,U.jsx)("source",{type:s.type,src:s.url}),(0,U.jsx)("track",{default:!0,kind:"captions"})]}),(0,U.jsx)("div",{className:"videoMask pointer-events-none absolute top-0 h-full w-full"}),(0,U.jsxs)("div",{className:"absolute bottom-0 h-10 w-full",children:[(0,U.jsx)("div",{className:"w-30 absolute -top-10 flex h-10 items-end overflow-hidden p-1 text-center",children:"".concat(null===(n=o.current)||void 0===n?void 0:n.currentTime.toFixed(2)," / ").concat(y.total||0)}),(0,U.jsx)("div",{className:"absolute top-0 h-full w-full bg-black opacity-50"}),(0,U.jsx)("div",{className:"absolute top-0 h-full w-full bg-slate-300",style:{width:"".concat(y.percent,"%")}})]})]})})),_=N;function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M=(0,i.memo)((function(){var e=(0,i.useRef)(),t=(0,i.useState)(v),n=(0,r.Z)(t,2),o=n[0],l=n[1],a=(0,i.useMemo)((function(){return[o,l]}),[o]);return(0,U.jsx)(f.Provider,{value:a,children:(0,U.jsxs)("div",{className:"flex h-full w-full items-center justify-center overflow-hidden",children:[(0,U.jsx)(_,{ref:e}),(0,U.jsx)("div",{className:"absolute top-0 right-0",children:(0,U.jsxs)("select",{className:"select-bordered select w-full max-w-xs",defaultValue:v.url,onChange:function(t){e.current.unmount();var n=Object.entries(h).filter((function(e){return e[1].url===t.target.value})).map((function(e){return e[1]}))[0];l((function(e){return R(R({},e),{},{video:n})}))},children:[(0,U.jsx)("option",{disabled:!0,children:"select video quality?"}),Object.entries(h).map((function(e){return(0,U.jsxs)("option",{value:e[1].url,children:[e[1].size,"(".concat(e[1].type,")")]},JSON.stringify(e))}))]})})]})})})),W=M},241:function(e,t,n){var o=n(81),r=n(645),i=n(667),l=n(692),a=r(o),u=i(l);a.push([e.id,".videoMask {\n  background-image: url("+u+");\n}\n",""]),e.exports=a},667:function(e){"use strict";e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},692:function(e,t,n){"use strict";n.r(t),t.default=n.p+"bundle/image/pages/test/video/mask.png"},979:function(e,t,n){var o;o=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValidateURL=t.ValidatePhone=t.ValidateEmail=t.CoverSize=t.Position=t.ScrollTop=t.Dollar=t.Uid=t.Pad=void 0,t.Pad=function(e,t){void 0===t&&(t=4);for(var n="",o=0;o<t;o++)n+="0";return String(n+e).slice(-1*t)},t.Uid=function(e){void 0===e&&(e=10);for(var t="",n=0;n<e;n++)t+=(16*(1+Math.random())|0).toString(16).substring(1);return t},t.Dollar=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},t.ScrollTop=function(){if(window)return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop},t.Position=function(e){if(window){var t=null==e?void 0:e.getBoundingClientRect();return{top:t.top+window.scrollY,left:t.left+window.scrollX}}},t.CoverSize=function(e,t){void 0===e&&(e={width:1280,height:720}),void 0===t&&(t={width:window.innerWidth,height:window.innerHeight});var n=e.width,o=e.height,r=t.width,i=t.height,l=o/n,a={width:0,height:0,left:0,top:0};return i/r>l?(a.width=i/l,a.height=i,a.left=.5*(r-n),a.top=0):(a.width=r,a.height=r*l,a.left=0,a.top=.5*(i-o)),a},t.ValidateEmail=function(e){return String(e).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)},t.ValidatePhone=function(e){return""!==e&&10===e.length&&"09"===e.slice(0,2)},t.ValidateURL=function(e){return!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)};var n={Pad:t.Pad,Uid:t.Uid,Dollar:t.Dollar,ScrollTop:t.ScrollTop,Position:t.Position,CoverSize:t.CoverSize,ValidateEmail:t.ValidateEmail,ValidatePhone:t.ValidatePhone,ValidateURL:t.ValidateURL};t.default=n}.apply(t,[n,t]),void 0===o||(e.exports=o)}}]);