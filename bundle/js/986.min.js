(self.webpackChunk_=self.webpackChunk_||[]).push([[986],{986:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var r=n(572),o=n(152),i=n(294),l=n.p+"bundle/video/pages/test/video/original.mp4",a=n.p+"bundle/video/pages/test/video/1080p.mp4",u=n.p+"bundle/video/pages/test/video/720p.mp4",s=n.p+"bundle/video/pages/test/video/480p.mp4",c=n.p+"bundle/video/pages/test/video/360p.mp4",d=(0,i.createContext)(),f={original:{url:l,text:"1080x1016",ext:"mp4",encoder:"H.264"},fullHD:{url:a,text:"1080x1016",ext:"mp4",encoder:"ffmpeg"},HD:{url:u,text:"1360x720",ext:"mp4",encoder:"ffmpeg"},SD:{url:s,text:"907x480",ext:"mp4",encoder:"ffmpeg"},SSD:{url:c,text:"680x360",ext:"mp4",encoder:"ffmpeg"}},p={url:f.HD.url},h=n(979),v=n(379),g=n.n(v),w=n(795),m=n.n(w),b=n(569),x=n.n(b),j=n(565),O=n.n(j),y=n(216),P=n.n(y),S=n(589),D=n.n(S),z=n(241),E=n.n(z),T={};T.styleTagTransform=D(),T.setAttributes=O(),T.insert=x().bind(null,"head"),T.domAPI=m(),T.insertStyleElement=P(),g()(E(),T),E()&&E().locals&&E().locals;var k=n(893);function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N={scrollTop:0,total:0,loaded:!1,percent:0,width:1280,height:678,index:0},Z=(0,i.forwardRef)((function(e,t){var n=(0,i.useRef)(),r=(0,i.useContext)(d),l=(0,o.Z)(r,1)[0],a=(0,i.useState)(l.url),u=(0,o.Z)(a,2),s=u[0],c=u[1],f=(0,i.useState)(!0),p=(0,o.Z)(f,2),v=p[0],g=p[1],w=(0,i.useState)(N),m=(0,o.Z)(w,2),b=m[0],x=m[1],j=(0,i.useState)({width:1280,height:678,left:0,top:0}),O=(0,o.Z)(j,2),y=O[0],P=O[1];return(0,i.useEffect)((function(){c(l.url),x(N),setTimeout((function(){g(!0)}),100)}),[l.url]),(0,i.useEffect)((function(){var e=function(){var e=(0,h.CoverSize)({width:b.width,height:b.height},{width:window.innerWidth,height:window.innerHeight});P(e)};return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),(0,i.useLayoutEffect)((function(){n.current&&b.index%3==0&&(n.current.currentTime=Number(b.scrollTop.toFixed(2)))}),[b.scrollTop]),(0,i.useImperativeHandle)(t,(function(){return{unmount:function(){g(!1)}}})),(0,k.jsxs)(k.Fragment,{children:[v&&(0,k.jsxs)("video",{preload:"auto",onLoadedData:function(e){x((function(t){return C(C({},t),{},{loaded:!0,total:e.target.duration})}))},onWheel:b.loaded?function(e){var t=e.deltaY;x((function(e){var n=e.scrollTop+.001*t,r=n<0?0:n;n>e.total&&(r=e.total);var o=r/e.total*100,i=e.index+1;return C(C({},e),{},{scrollTop:r,percent:o,index:i})}))}:function(){},ref:n,style:{width:y.width,height:y.height},className:"max-h-none max-w-none",children:[(0,k.jsx)("source",{type:"video/mp4",src:s}),(0,k.jsx)("track",{default:!0,kind:"captions"})]}),(0,k.jsx)("div",{className:"videoMask pointer-events-none absolute top-0 h-full w-full"}),(0,k.jsxs)("div",{className:"absolute bottom-0 h-10 w-full",children:[(0,k.jsx)("div",{className:"absolute top-0 h-full w-full bg-black opacity-50"}),(0,k.jsx)("div",{className:"absolute top-0 h-full w-full bg-slate-300",style:{width:"".concat(b.percent,"%")}})]})]})}));function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=(0,i.memo)((function(){var e=(0,i.useRef)(),t=(0,i.useState)(p),n=(0,o.Z)(t,2),r=n[0],l=n[1],a=(0,i.useMemo)((function(){return[r,l]}),[r]);return(0,k.jsx)(d.Provider,{value:a,children:(0,k.jsxs)("div",{className:"flex h-screen w-full items-center justify-center overflow-hidden",children:[(0,k.jsx)(Z,{ref:e}),(0,k.jsx)("div",{className:"absolute top-0 right-0",children:(0,k.jsxs)("select",{className:"select-bordered select w-full max-w-xs",defaultValue:p.url,onChange:function(t){e.current.unmount(),l((function(e){return R(R({},e),{},{url:t.target.value})}))},children:[(0,k.jsx)("option",{disabled:!0,children:"select video quality?"}),Object.entries(f).map((function(e){return(0,k.jsxs)("option",{value:e[1].url,children:[e[0],"(".concat(e[1].encoder,")")]},JSON.stringify(e))}))]})})]})})}))},241:function(e,t,n){var r=n(81),o=n(645),i=n(667),l=n(692),a=o(r),u=i(l);a.push([e.id,".videoMask {\n  background-image: url("+u+");\n}\n",""]),e.exports=a},667:function(e){"use strict";e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},692:function(e,t,n){"use strict";n.r(t),t.default=n.p+"bundle/image/pages/test/video/mask.png"},979:function(e,t,n){var r;r=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValidateURL=t.ValidatePhone=t.ValidateEmail=t.CoverSize=t.Position=t.ScrollTop=t.Dollar=t.Uid=t.Pad=void 0,t.Pad=function(e,t){void 0===t&&(t=4);for(var n="",r=0;r<t;r++)n+="0";return String(n+e).slice(-1*t)},t.Uid=function(e){void 0===e&&(e=10);for(var t="",n=0;n<e;n++)t+=(16*(1+Math.random())|0).toString(16).substring(1);return t},t.Dollar=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},t.ScrollTop=function(){if(window)return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop},t.Position=function(e){if(window){var t=null==e?void 0:e.getBoundingClientRect();return{top:t.top+window.scrollY,left:t.left+window.scrollX}}},t.CoverSize=function(e,t){void 0===e&&(e={width:1280,height:720}),void 0===t&&(t={width:window.innerWidth,height:window.innerHeight});var n=e.width,r=e.height,o=t.width,i=t.height,l=r/n,a={width:0,height:0,left:0,top:0};return i/o>l?(a.width=i/l,a.height=i,a.left=.5*(o-n),a.top=0):(a.width=o,a.height=o*l,a.left=0,a.top=.5*(i-r)),a},t.ValidateEmail=function(e){return String(e).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)},t.ValidatePhone=function(e){return""!==e&&10===e.length&&"09"===e.slice(0,2)},t.ValidateURL=function(e){return!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)};var n={Pad:t.Pad,Uid:t.Uid,Dollar:t.Dollar,ScrollTop:t.ScrollTop,Position:t.Position,CoverSize:t.CoverSize,ValidateEmail:t.ValidateEmail,ValidatePhone:t.ValidatePhone,ValidateURL:t.ValidateURL};t.default=n}.apply(t,[n,t]),void 0===r||(e.exports=r)}}]);